---
share: true
---

For https://cepheusjournal.com/generators/subsector-editor-and-mapper/
Or https://zhodani.space/stuff/generators/subsector-editor-and-mapper

```dataviewjs
let str = ``;

const currentFile = dv.current().file;

const result = await dv.query(
  `LIST FROM "${currentFile.folder}" WHERE startswith(file.name, "0")`
);

let routes = [];

if (result.successful) {
  for (const _page of result.value.values) {
    const page = dv.page(_page);
    const uwp = page.uwp
      .split(" ")
      .filter((s) => s)
      .map((s) => s.trim());
    let _routes;
    if (page.routes) {
      _routes = page.routes
        .split(",")
        .filter((r) => r)
        .map((r) => [uwp[1], r.trim()].sort());
      routes = routes.concat(_routes);
    }
    const notes = uwp.slice(3);
    const tradeCodesEndIndex = notes.findIndex(
      (n) => n.length === 1 || n.length === 3
    );
    const tradeCodes = notes.splice(0, tradeCodesEndIndex);
    const travelCode = notes[0].length === 1 ? notes.shift() : " ";
    str = `${str}
${uwp[0].padEnd(14, " ")}${uwp[1].padEnd(5, " ")}${uwp[2]
      .substr(0, 9)
      .padEnd(11, " ")}${uwp[2].substr(9).padEnd(2, " ")}${tradeCodes
      .join(" ")
      .padEnd(16, " ")}${travelCode.padEnd(3, " ")}${notes.join(" ")}`;
  }
  routes = routes
    .sort((a, b) => `${a[0]}${a[1]}` - `${b[0]}${b[1]}`)
    .reduce((acc, r) => {
      const exists = acc.find((a) => a[0] === r[0] && a[1] === r[1]);
      if (!exists) {
        acc.push(r);
      }
      return acc;
    }, []);
  str = `${routes.map((r) => `route ${r[0]} ${r[1]}`).join(`\n`)}${str}`;
  str = `#--------1---------2---------3---------4---------5-------
#PlanetName   Loc. UPP Code   B   Notes         Z  PBG Al
#----------   ---- ---------  - --------------- -  --- --\n${str}`;
  const ta = dv.el("div", "", {
    attr: {
      style: "white-space: pre-wrap; width: 100%; font-family: monospace;",
    },
  });
  ta.innerText = str;
} else {
  dv.el("div", "Failed to parse");
}
```
